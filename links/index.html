<!DOCTYPE html>
<html lang="he" dir="rtl">

  <head>
    <meta charset="utf-8" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"> 
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="slidify" />
    <meta name="google" content="notranslate" />
    <meta name="robots" content="follow, index" />
    <link rel="canonical" href="https://romanbr87.github.io/" />

    <meta name="description" content="אתרים לחיפוש ומציאת עבודה באינטרנט" />
    <meta name="author" content="https://www.facebook.com/RonenBr60/" />

    <meta name="description" content="רשימת קישורים לחיפוש עבודה באינטרנט בכל סוגי האתרים הקיימים" />
    <meta name="author" content="https://www.facebook.com/RonenBr60/" />

    <meta property="og:description" content="רשימת קישורים לחיפוש עבודה באינטרנט בכל סוגי האתרים הקיימים"/>
    <meta property="og:url" content="https://romanbr87.github.io/"/>
    <meta property="og:title" content="קישורים לחיפוש עבודה באתרי אינטרנט"/>
    <meta property="og:type" content="application"/>		
    <meta property="og:site_name" content="רשימת אתרים" />
    <meta property="og:image" content="img.jpg"/>		
    <meta property="article:publisher" content="https://www.facebook.com/RonenBr60/" />
    <meta property="article:author" content="https://www.facebook.com/RonenBr60/" />
    <meta property="article:tag" content="עבודה" />
    <meta property="article:tag" content="גיוס" />
    <meta property="article:tag" content="חיפוש עבודה" />
    
    <link rel="shortcut icon" href="http://www.w3.org/Icons/W3C/Beveled-Logo.gif" />
    <link rel="apple-touch-icon" href="http://www.w3.org/Icons/W3C/Beveled-Logo.gif" />

  	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" />

    <title>אינדקס אתרי תעסוקה</title>

    <style>
      th, td { text-align: center; width: auto; }

      .nameCell { width: 25%; text-align: right;}
      .numberCell { width: 5%; text-align: right; }

      tbody > tr:first-child > td { border-top: solid silver }
      .borderTop { border-top: 3px solid silver; }
      .caption { font-weight: bolder;}

      @media only screen and (max-width: 768px) {
        #caption { font-size: 2em; } 
      }
    </style>

    <title>אתרי תעסוקה</title>
  </head>

  <body>
    <div class="container text-center">
      <div class="jumbotron text-left" id="intro"></div>

      <select id="sel" onchange="getData (table1, this.value);"></select>
      
      <table class="table table-bordered table-striped text-center" id="testTable">
        <canption>  <p class="font-weight-bold"><h1 id="caption"></h1></p> </canption>
        <thead>
          <tr style="background-color: yellow;">
            <th class="numberCell">#</th>
            <th class="nameCell">שם</th>
            <th>קישור 1</th>
            <th>קישור 2</th>
            <th>דף פייסבוק</th>
            <th>לינקדאין</th>
            </tr>
        </thead>
        <tbody id="dataTable"></tbody>
      </table>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js" type="application/javascript"></script>

    <script type="text/javascript">
      Array.prototype.totalLen = () => {
        return this.reduce((acc,element) => acc + element.links.length, 0)
      }

      var fileName = "https://romanbr87.github.io/links/db1.json";
      fetch(fileName, {
        credentials: 'same-origin'
      })
      .then(response => response.json())
      .then(data => {
        jobs_data = data.job;
        
        /*var jj = jobs_data.map (e => {
            return [{ name: e.name}, 
            { links: e.links.map (e1 => {
              var e2 = e1;
              if (e1.email1 == undefined) {
                e2.email1 = '';
                e2.email2 = '';
                e2.tel1 = '';
                e2.tel2 = '';
              }
              if (e1.whatsapp == undefined) e2.whatsapp = '';
              return e2;
            })
          }]
        })

        console.log ({job: jj});*/

        jobs_data.map ((e, i) => {
          let op = document.createElement ('option');
          op.value = i;
          op.innerHTML = (i+1 < 9 ? "0"+(i+1) : (i+1))  + ". " + e.name;
          sel.appendChild (op);
        })

        var len = jobs_data.reduce((acc,element) => acc + element.links.length, 0)
        intro.innerHTML = jobs_data.length + " categories " + len + " websites"
        console.log (len);

      })
      .catch((error) => {
        console.error('Error:', error);
      });


      getData (table1, 0);
      function getData (table, index) {
        fetch(fileName, {
            credentials: 'same-origin'
          })
          .then(response => response.json())
          .then(data => {
            jobs_data = data.job;
            //var len = jobs_data.reduce((acc,element) => acc + element.links.length, 0)
            console.log (data);
            table(jobs_data[index]);         
          })
          .catch((error) => {
            console.error('Error:', error);
          });
      }
    

      function table1 (data) {
        caption.innerHTML = data.name;

        let name, link1, link2, facebook, linkedIn, tr, td, a;
        let dataTable = document.getElementById('dataTable');
        dataTable.innerHTML = "";

        j = 0;
        for (let i = 0; i < data.links.length; i++) {

            name = data.links[i]['site_name'];
            
            link1 = data.links[i]['link'];
            link2 = data.links[i]['link2'];
            facebook1 = data.links[i]['facebook_link1'];
            linkedIn = data.links[i]['linkedIn_link'];

            tr = document.createElement ('tr');
            if (data.links[i]['border'] != undefined) tr.setAttribute ("class", "borderTop")

            td = document.createElement ('td');
            td.setAttribute ('class', 'numberCell')
            td.innerHTML = (++j) + ".";
            tr.appendChild (td);
            
            
            td = document.createElement ('td');
            td.setAttribute ('class', 'nameCell')
            td.innerHTML = name;
            tr.appendChild (td);

            td = document.createElement ('td');
            if (link1 != '') {
              a = document.createElement ('a');
              a.setAttribute ('href', link1);
              a.innerHTML = "קישור 1";
              td.appendChild (a)
            }
            else td.innerHTML = "קישור 1"
            tr.appendChild (td);

            td = document.createElement ('td');
            if (link2 != '') {
              a = document.createElement ('a');
              a.setAttribute ('href', link2);
              a.innerHTML = "קישור 2";
              td.appendChild (a)
            }
            else td.innerHTML = "קישור 2"
            tr.appendChild (td);

            td = document.createElement ('td');
            if (facebook1 != '') {
              a = document.createElement ('a');
              a.setAttribute ('href', facebook1);
              a.innerHTML = "דף פייסבוק";
              td.appendChild (a)
            }
            else td.innerHTML = "דף פייסבוק"
            tr.appendChild (td);

            td = document.createElement ('td');
            if (linkedIn != '') {
              a = document.createElement ('a');
              a.setAttribute ('href', linkedIn);
              a.innerHTML = "לינקדאין";
              td.appendChild (a)            
            }
            else td.innerHTML = "לינקדאין"

            tr.appendChild (td);
            dataTable.appendChild (tr);
        }

      }
      /*function table1 () {
          $.getJSON("https://spreadsheets.google.com/feeds/list/1UydhHd8LNYG9NYVHDNsCQG14LIR0sqOQj2fY1YgeOnc/od6/public/values?alt=json", function(data) {
          var sheetData = data.feed;
          //caption.innerHTML = sheetData.title.$t;
          console.log (sheetData);

          let name, link1, link2, facebook, linkedIn, tr, td, a;
          let dataTable = document.getElementById('dataTable');
          j = 0;
          for (let i = 0; i < sheetData.entry.length; i++) {

              name = data.feed.entry[i]['gsx$שם']['$t'];
              if (name=="-") continue;
              link1 = data.feed.entry[i]['gsx$קישור1']['$t'];
              link2 = data.feed.entry[i]['gsx$קישור2']['$t'];
              facebook = data.feed.entry[i]['gsx$דףפייסבוק']['$t'];
              linkedIn = data.feed.entry[i]['gsx$לינקדאין']['$t'];

              tr = document.createElement ('tr');
              td = document.createElement ('td');
              td.setAttribute ('class', 'numberCell')
              td.innerHTML = (++j) + ".";
              tr.appendChild (td);
              
              
              td = document.createElement ('td');
              td.setAttribute ('class', 'nameCell')
              td.innerHTML = name;
              tr.appendChild (td);

              td = document.createElement ('td');
              a = document.createElement ('a');
              a.setAttribute ('href', link1);
              a.innerHTML = "קישור 1";
              td.appendChild (a)
              tr.appendChild (td);

              td = document.createElement ('td');
              a = document.createElement ('a');
              a.setAttribute ('href', link2);
              a.innerHTML = "קישור 2";
              td.appendChild (a)
              tr.appendChild (td);

              td = document.createElement ('td');
              a = document.createElement ('a');
              a.setAttribute ('href', facebook);
              a.innerHTML = "דף פייסבוק";
              td.appendChild (a)
              tr.appendChild (td);

              td = document.createElement ('td');
              a = document.createElement ('a');
              a.setAttribute ('href', linkedIn);
              a.innerHTML = "לינקדאין";
              td.appendChild (a)
              tr.appendChild (td);

              dataTable.appendChild (tr);
          }

        });
      }*/
    </script>
  </body>

</html>